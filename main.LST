C51 COMPILER V9.01   MAIN                                                                  01/25/2019 01:53:34 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "reg52.h"       //´ËÎÄ¼şÖĞ¶¨ÒåÁËµ¥Æ¬»úµÄÒ»Ğ©ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷
   2          #include "stdlib.h"
   3          void delay(unsigned int n);//ÉùÃ÷º¯Êı
   4          void display(long int number);
   5          void control();
   6          unsigned char segs[13] = {0xfc,0x60,0xda,0xf2,0x66,0xb6,0xbe,0xe0,0xfe,0xf6,0x02,0x00,0xde,}; //Î»Ñ¡0,1,2,
             -3,4,5,6,7,8,9,kong,-,e
   7          unsigned char tongd[7] = {0xff,0xfe,0xfd,0xfb,0xf7,0xef,0xdf,};//¶ÎÑ¡
   8          long int m,i,z,k=0,amount=0;
   9          long int temp=0;
  10          long int g,u=0;
  11          
  12          
  13          
  14          void main()//Ö÷º¯Êı
  15          {
  16   1          m=999;//Õâ¸ö99¿ÉÒÔÈÎÒâÊı£¬Ö»Òª²»ÊÇ0~9Ö®¼äµÄÊı¼´¿É
  17   1          g=0;//ÕâÊÇ¸ø¼ÆËãÆ÷¸³³õÖµ£¬¼´¿ª¼ÆËãÆ÷¾ÍÔÚÊıÂë¹ÜÉÏÏÔÊ¾0
  18   1          while(1)
  19   1          {
  20   2              control();//¼ì²â¼üÅÌµÄÊäÈëÇé¿ö
  21   2              if(m!=999)//Èç¹û¼üÅÌÉÏÓĞÊı×ÖÊäÈë£¬ÄÇÃ´m¾Í±ØÈ»ÊÇ0~9Ö®¼äµÄÒ»¸öÊı,Ö´ĞĞº¯ÊıÌå
  22   2              {
  23   3                  g = 10*g + m;
  24   3                  m = 999;//Ò»¶¨Òª¸ø»ØÕâ¸ömÖµ£¬ÒòÎª¼üÅÌÉÏµÄ¼üÖµÒÑ¾­¸³¸øÁËg£¬Èç¹û²»¸ø»ØmÖµ£¬¾Í»áÔì³ÉÕâ¸öifÓï¾äÃ¿´
             -Î¶¼»á±»Ö´ĞĞ£¬¶ø²»¹ÜÄãÓĞÃ»ÓĞ°´ÏÂ¼üÅÌ
  25   3              }
  26   2              if(k==31||k==32||k==33||k==34)//ÔËËã·ûµÄ±êÖ¾Î»
  27   2              {
  28   3                  u = k;//°ÑkÖµ¸³¸øÁíÒ»¸ö±äÁ¿£¬È»ºó°ÑkÇåÁã£¬Èç¹û²»ÇåÁã£¬Õâ¸öifÓï¾äÒ²»áÃ¿´Î¶¼±»Ö´ĞĞµÄ£¬¶ø²»¹ÜÄãÓĞ
             -Ã»ÓĞ°´ÏÂ¼üÅÌ
  29   3                  temp = g;//°´ÏÂÔËËã·ûºó£¬ÊÇ°Ñ¸Õ²ÅµÄÕâ¸öÊı´æÆğÀ´
  30   3      
  31   3                  g=0;//Õâ¸ögÒ²ÒªÇåÁãµÄ£¬·ñÔò¼Ç²»ÁËÄãÒª²Î¼ÓÔËËãµÄµÚ2¸öÊıµÄ£»
  32   3                  k=0;//ÈçÉÏËùËµ£¬±ØĞëÇåÁã
  33   3              }
  34   2              if(amount==30)//ÕâÀï¾ÍÊÇµÈÓÚÀ²¡£
  35   2              {
  36   3                  switch(u)
  37   3                  {
  38   4                  case 31:
  39   4                      g=temp + g;
  40   4                      break;//ÇóºÍ
  41   4                  case 32:
  42   4                      g=temp-g;
  43   4                      break;//Çó²î
  44   4                  case 33:
  45   4                      g=temp*g;
  46   4                      break;//Çó»ı
  47   4                  case 34:
  48   4                      g=temp/g;
  49   4                      break;//ÇóÉÌ
  50   4                  /*case 35:
  51   4                      g=pow(temp,g);
  52   4                      break;//Çón´Î·½
C51 COMPILER V9.01   MAIN                                                                  01/25/2019 01:53:34 PAGE 2   

  53   4                  case 36:
  54   4                      g=log10(temp)/log10(g);
  55   4                      break;//Çó¿ªn´Î·½
  56   4                      case 37:g=temp*g;break;
  57   4                      case 38:g=temp/g;break;*/
  58   4                  }
  59   3                  u=0;
  60   3                  amount=0;//ÔËËã½áÊø£¬¶¼ÇåÁã
  61   3              }
  62   2              display(g);//ÏÔÊ¾½á¹ûÀ²
  63   2              if(z==40)
  64   2                  break;//ËãÍêÁË£¬ÓÃÕâ¸ö¼ü°Ñ¼ÆËãÆ÷¸´Î»
  65   2          }
  66   1      }
  67          
  68                                          
  69                  
  70          void control() {//¼üÅÌÉ¨Ãè¶ÁÈ¡º¯Êı,ÎÒ¼üÅÌ½ÓÔÚP3ÉÏ
  71   1          unsigned char tablelie[]= {0x7f,0xbf,0xdf,0xef};//4*4¾ØÕó¼üÅÌ£¬½ÓP3¿Ú£»¸ß4Î»ÂÖÁ÷¸øµÍµçÆ½£¬¸ù¾İµÍ4Î»µÄµ
             -çÆ½±ä»¯È·¶¨°´ÏÂµÄÊÇÄÄ¸ö¼ü£»
  72   1          for(i=0; i<4; i++) //Õâ¸öÑ­»·ÊÇ¸øP3¿ÚÉÏµÄ¼üÅÌµÄ¸ß4Î»ÂÖÁ÷¸øµÍµçÆ½£»
  73   1          {
  74   2      
  75   2              P0= tablelie[i];
  76   2              if ((P0 & tablelie[i])!= tablelie[i]) //ÕâÀïÊÇ¼ì²âÊÇ·ñÓĞ¼üÅÌ±»°´ÏÂ£»
  77   2              {
  78   3      
  79   3      
  80   3                  delay(10);
  81   3      
  82   3                  if((P0 & tablelie[i]) != tablelie[i]) //ÕâÀï¾­¹ı10µÄÑÓÊ±ºó£¬¿´Õâ¸ö¼üÊÇ·ñ´¦ÓÚ±»°´ÏÂµÄ×´Ì¬£¬Õâ±ã
             -ÊÇËùÎ½µÄÈí¼şÏû¶¶£»
  83   3                  {
  84   4                      switch (P0)//»ñÈ¡°´ÏÂµÄ×Ö·û
  85   4                      {
  86   5                      case 0xb7://ÕâÊÇ°´ÏÂÊ±µÄµçÆ½Çé¿ö,¿É¸ù¾İProteusÄ£ÄâµÃ³ö
  87   5                          m=1;
  88   5                          break;
  89   5                      case 0xbb:
  90   5                          m=2;
  91   5                          break;
  92   5                      case 0xbd:
  93   5                          m=3;
  94   5                          break;
  95   5                      case 0x7e:
  96   5                          k=31;
  97   5                          break;//ÕâÊÇ¡°¼Ó¡±µÄ±êÖ¾Î»£»
  98   5                      case 0xd7:
  99   5                          m=4;
 100   5                          break;
 101   5                      case 0xdb:
 102   5                          m=5;
 103   5                          break;
 104   5                      case 0xdd:
 105   5                          m=6;
 106   5                          break;
 107   5                      case 0xbe:
 108   5                          k=32;
 109   5                          break;//ÕâÊÇ¡°¼õ¡±µÄ±êÖ¾Î»£»
 110   5                      case 0xe7:
 111   5                          m=7;
 112   5                          break;
C51 COMPILER V9.01   MAIN                                                                  01/25/2019 01:53:34 PAGE 3   

 113   5                      case 0xeb:
 114   5                          m=8;
 115   5                          break;
 116   5                      case 0xed:
 117   5                          m=9;
 118   5                          break;
 119   5                      case 0xde:
 120   5                          k=33;
 121   5                          break;//ÕâÊÇ¡°³Ë¡±µÄ±êÖ¾Î»;
 122   5                      case 0x77:
 123   5                          z=40;
 124   5                          break;//ÕâÊÇ¡°¼ÆËãÆ÷ÇåÁã¡±µÄ±êÖ¾Î»£»
 125   5                      case 0x7b:
 126   5                          m=0;
 127   5                          break;
 128   5                      case 0x7d:
 129   5                          amount=30;
 130   5                          break;//ÕâÊÇ¡°µÈÓÚ¡±µÄ±êÖ¾Î»£»
 131   5                      case 0xee:
 132   5                          k=34;
 133   5                          break;//ÕâÊÇ¡°³ı¡±µÄ±êÖ¾Î»£»
 134   5                      }
 135   4                  }
 136   3                  while((P0 & tablelie[i]) != tablelie[i]);//´«ËµÖĞµÄËÉÊÖ¼ì²â£¬±ØĞëÒªµÄ
 137   3              }
 138   2          }
 139   1      
 140   1      }
 141          
 142          
 143           
 144          
 145            
 146          
 147          
 148          void display(long int number) { //ÏÔÊ¾º¯Êı£¬¸ºÔğÏÔÊ¾Êı×ÖÔÚÊıÂë¹ÜÉÏÃæ
 149   1              int fu = 0;
 150   1              int cdu,se;
 151   1              long int temp;
 152   1              if(number > 999999 || number < -99999 ) { //´«ÈëÊı×ÖµÄºÏÀíĞÔÅĞ¶Ï
 153   2                 for(se = 6;se > 0;se--) { //´íÎó´¦Àí
 154   3                              P2 = tongd[se];
 155   3                              P1 = segs[10];                          
 156   3                              delay(1);       
 157   3                              //P1 = segs[11];
 158   3                              //P2 = tongd[0];
 159   3                              delay(1);
 160   3                      }
 161   2              
 162   2              } else if(number <= 999999 && number >= -99999) { //»ñÈ¡Êı×ÖµÄ³¤¶È£¬ÔİÊ±Ïë²»³ö¸üºÃµÄËã·¨
 163   2                      
 164   2                      temp = labs(number);
 165   2                      
 166   2                      if(number <= 9 && number >= 0) {cdu=1;}//ÕâÑùĞ´ÊÇ·ÀÖ¹Êı×ÖÖĞ¼äÓĞ0
 167   2                      else if (number <= 99 && number >= 10) {cdu=2;} 
 168   2                      else if (number <= 999 && number >= 100) {cdu=3;}
 169   2                      else if (number <= 9999 && number >= 1000) {cdu=4;}
 170   2                      else if (number <= 99999 && number >= 10000) {cdu=5;}
 171   2                      else if (number <= 999999 && number >= 100000) {cdu=6;}
 172   2      
 173   2                      else if (number < 0 && number > -10) {cdu=1;P2 = 0xfe;P1 = 0x02;}
 174   2                      else if (number <= -10 && number >= -99) {cdu=2;P2 = 0xfe;P1 = 0x02;}   
C51 COMPILER V9.01   MAIN                                                                  01/25/2019 01:53:34 PAGE 4   

 175   2                      else if (number <= -100 && number >= -999) {cdu=3;P2 = 0xfe;P1 = 0x02;}
 176   2                      else if (number <= -1000 && number >= -9999) {cdu=4;P2 = 0xfe;P1 = 0x02;}
 177   2                      else if (number <= -10000 && number >= -99999) {cdu=5;P2 = 0xfe;P1 = 0x02;}
 178   2                      
 179   2                      for(se = 6;se > 6 - cdu;se--) {//Ë¢ĞÂÏÔÊ¾ÊıÂë¹ÜseÎªµ±Ç°Ë¢ĞÂ
 180   3                                      if(number < 0) {
 181   4                                      P2 = 0xfe;P1 = 0x02;
 182   4                                              
 183   4                                                      
 184   4                                              delay(1);//ÑÓÊ±
 185   4                              
 186   4                                              //P1 = segs[11];//Çå¿ÕÎ»Ñ¡
 187   4                                              //P2 = tongd[0];//Çå¿Õ¶ÎÑ¡·ÀÖ¹ÖØÓ°
 188   4                                      
 189   4                                       }
 190   3                                       delay(1);//ÑÓÊ±
 191   3                      
 192   3                                      P1 = segs[11];//Çå¿Õ
 193   3                                      P2 = tongd[0];//Çå¿Õ·ÀÖ¹ÖØÓ°
 194   3                                      delay(1);
 195   3                                      P2 = tongd[se];//Î»Ñ¡
 196   3                                      P1 = segs[temp%10];//¶ÎÑ¡
 197   3                                      temp/=10;//Ã¿´Î¶ÎÑ¡È¡³ö×îºóÒ»Î»£¬È»ºó³ı10¿³µô×îºóÒ»Î»
 198   3                                              
 199   3                                      
 200   3                              
 201   3                              
 202   3                      }
 203   2                      }
 204   1          
 205   1      }
 206          void delay(unsigned int n) { //Ò»¸ö¼òµ¥µÄÑÓÊ±º¯Êı
 207   1        unsigned int i,j;
 208   1        for(j=0;i<n;i++) {
 209   2              for(j=0;j<123;j++){}
 210   2        }
 211   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1522    ----
   CONSTANT SIZE    =      4    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     52      20
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
